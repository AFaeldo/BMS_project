@{
    Layout = "~/Views/Shared/_BarangayLayout.cshtml";
    ViewData["Title"] = "Dashboard";
}

<div class="container-fluid">
    <!-- PAGE HEADER -->
    <div class="mb-4">
        <h2 class="fw-bold">SK Barangay Dashboard</h2>
    </div>

    <!-- KPI CARDS -->
    <div class="row g-4 mb-4">
        <div class="col-md-3">
            <div class="card text-center border-0 shadow-sm">
                <div class="card-body">
                    <h6 class="fw-semibold text-secondary mb-1">Total Youth Registered</h6>
                    <h3 class="fw-bold mb-0">0</h3>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center border-0 shadow-sm">
                <div class="card-body">
                    <h6 class="fw-semibold text-secondary mb-1">Approved Projects</h6>
                    <h3 class="fw-bold mb-0">0</h3>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center border-0 shadow-sm">
                <div class="card-body">
                    <h6 class="fw-semibold text-secondary mb-1">Ongoing Projects</h6>
                    <h3 class="fw-bold mb-0">0</h3>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center border-0 shadow-sm">
                <div class="card-body">
                    <h6 class="fw-semibold text-secondary mb-1">Pending Reports</h6>
                    <h3 class="fw-bold mb-0">0</h3>
                </div>
            </div>
        </div>
    </div>

    <div class="row g-4 mt-4">
        <!-- LEFT SIDE: Recent Activities (full height) -->
        <div class="col-md-8">
            <div class="card shadow-sm border-0 rounded-3 h-100">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <div class="fw-bold">Recent Activities</div>
                    <button id="clearActivities" class="btn btn-sm btn-danger">Clear</button>
                </div>
                <div class="card-body">
                    <ul id="activityList" class="list-group list-group-flush">
                        <!-- Activity items appear here -->
                    </ul>
                </div>
            </div>
        </div>

        <!-- RIGHT SIDE: Gender Chart -->
        <div class="col-md-4">
            <div class="card shadow-sm border-0">
                <div class="card-header fw-bold">Gender Distribution</div>
                <div class="card-body">
                    <canvas id="genderChart"></canvas>
                </div>
            </div>

            <!-- You can also add Age or Barangay charts below if desired -->
        </div>
    </div>

    <!-- Additional Charts Beneath (Optional) -->
    <div class="row g-4 mt-3">
        <!-- Age Chart -->
        <div class="col-md-6">
            <div class="card shadow-sm border-0">
                <div class="card-header fw-bold">Age Distribution</div>
                <div class="card-body">
                    <canvas id="ageChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Barangay Chart -->
        <div class="col-md-6">
            <div class="card shadow-sm border-0">
                <div class="card-header fw-bold">Youth per Barangay</div>
                <div class="card-body">
                    <canvas id="barangayChart"></canvas>
                </div>
            </div>
        </div>
    </div>

@section Scripts {
    <!-- Load Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>

         // Clear Recent SK Activities
        document.getElementById('clearActivities').addEventListener('click', function () {
            const list = document.getElementById('activityList');
            list.innerHTML = '';
        });

        // ===============================
        // SAMPLE DATA (Replace from Model)
        // ===============================
        const maleCount = 120;
        const femaleCount = 150;

        const ageLabels = ['15', '16', '17', '18', '19', '20', '21', '22', '23', '24'];
        const ageData = [10, 18, 20, 25, 22, 15, 8, 12, 9, 6];

        const barangayLabels = ['Barangay 1', 'Barangay 2', 'Barangay 3', 'Barangay 4'];
        const barangayCounts = [50, 80, 30, 70];

        // ===============================
        // PIE CHART - Gender
        // ===============================
        new Chart(document.getElementById('genderChart'), {
            type: 'pie',
            data: {
                labels: ['Male', 'Female'],
                datasets: [{
                    data: [maleCount, femaleCount],
                    backgroundColor: ['#4e73df', '#e83e8c']
                }]
            }
        });

        // ===============================
        // BAR CHART - Age Distribution
        // ===============================
        new Chart(document.getElementById('ageChart'), {
            type: 'bar',
            data: {
                labels: ageLabels,
                datasets: [{
                    label: 'Total Youth',
                    data: ageData,
                    backgroundColor: '#1cc88a'
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });

        // ===============================
        // BAR CHART - Youth per Barangay
        // ===============================
        new Chart(document.getElementById('barangayChart'), {
            type: 'bar',
            data: {
                labels: barangayLabels,
                datasets: [{
                    label: 'Youth Count',
                    data: barangayCounts,
                    backgroundColor: '#36b9cc'
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });

        // Clear Recent Activities
        document.getElementById('clearActivities').addEventListener('click', function () {
            document.getElementById('activityList').innerHTML = '';
        });
    </script>
}
